<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Overview - Robotics Workshop</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Overview";
        var mkdocs_page_input_path = "04_Communication\\nRF\\README.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Robotics Workshop
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../00_Getting_started/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Arduino</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../00_Getting_started/Arduino/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../00_Getting_started/Arduino/serial_print/">Serial Print</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../00_Getting_started/Arduino/serial_plotter/">Serial Plotter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../00_Getting_started/Arduino/serial_input/">Serial Input</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../00_Getting_started/Arduino/putting_everything_together/">Putting everything together</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../00_Getting_started/LEDs/">LEDs</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Sensors</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../01_Sensors/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Distance</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../01_Sensors/Distance/VL53L0X_ToF/">VL53L0X ToF</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >IMU</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../01_Sensors/MPU_6050/">MPU 6050</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Electricity</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../03_Power/">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Actuators</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../02_Actuators/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../02_Actuators/motor_driver/">Motor Driver</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Communication</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Protocols</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../I2C/">I2C</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >nRF</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#theory">Theory</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#how-it-works">How It Works</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#nrf24l01-module-tutorial-for-arduino-nano-sending-a-simple-text-message">nRF24L01 Module Tutorial for Arduino Nano: Sending a Simple Text Message</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#wiring-the-nrf24l01-module-to-arduino-nano">Wiring the nRF24L01 Module to Arduino Nano</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#installing-required-libraries">Installing Required Libraries</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#basic-code-example">Basic Code Example</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#transmitter-code">Transmitter Code</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#receiver-code">Receiver Code</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#code-explanation">Code Explanation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#running-the-code">Running the Code</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#additional-resources">Additional Resources</a>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../remote/">Remote</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Assembly</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../05_Assembly/receiver/">Receiver</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../05_Assembly/transmitter/">Transmitter</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Drive</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../06_Drive/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../06_Drive/receiver_code/">Receiver</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../06_Drive/transmitter_code/">Transmitter</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Transition to Drone</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../07_Robo_Drone/">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Outlook</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../08_Outlook/">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Help</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../09_Help/">Troubleshooting</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Robotics Workshop</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Communication</li>
          <li class="breadcrumb-item">nRF</li>
      <li class="breadcrumb-item active">Overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="arduino-wireless-communication-with-nrf24l01-tutorial">Arduino Wireless Communication with nRF24L01 Tutorial<a class="headerlink" href="#arduino-wireless-communication-with-nrf24l01-tutorial" title="Permanent link">&para;</a></h1>
<p><img alt="nRF24L01" src="../../99_Resources/images/nRF24L01_basic_scheme.png" /></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This tutorial demonstrates how to establish wireless communication between two Arduino boards using nRF24L01 transceiver modules. The nRF24L01 operates on the 2.4 GHz frequency and is capable of transmitting data up to 100 meters.</p>
<h3 id="theory">Theory<a class="headerlink" href="#theory" title="Permanent link">&para;</a></h3>
<p>The nRF24L01 module is a transceiver, meaning it can both send and receive data. It operates in the 2.4 GHz ISM band, which is license-free worldwide. Key features include:</p>
<ol>
<li><strong>Frequency Hopping</strong>: It uses frequency-hopping spread spectrum (FHSS), which improves reliability and reduces interference by switching frequencies during transmission.</li>
<li><strong>Data Rate</strong>: It supports data rates of 250 kbps, 1 Mbps, and 2 Mbps. Higher data rates reduce transmission time, which can help in saving power.</li>
<li><strong>Communication Protocol</strong>: nRF24L01 uses a simple and efficient communication protocol with a 5-byte address to identify devices. It supports up to 6 communication channels, allowing multiple nRF24L01 modules to communicate simultaneously without interference.</li>
<li><strong>Power Management</strong>: The module can operate in different power modes, including a power-down mode to save energy when not transmitting.</li>
<li><strong>SPI Interface</strong>: Communication with the Arduino is done through the Serial Peripheral Interface (SPI). This interface allows fast data transfer between the Arduino and the nRF24L01 module.</li>
</ol>
<h3 id="how-it-works">How It Works<a class="headerlink" href="#how-it-works" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Initialization</strong>: The module needs to be initialized and configured using the SPI interface. This includes setting the transmission power, data rate, and channel frequency.</li>
<li><strong>Addressing</strong>: Each module must be assigned a unique address. This ensures that only the intended receiver can accept the data sent by a particular transmitter.</li>
<li><strong>Sending Data</strong>: Data is loaded into the moduleâ€™s buffer and then transmitted over the air. The module automatically handles packet formation, including the address, payload, and CRC (Cyclic Redundancy Check) for error detection.</li>
<li><strong>Receiving Data</strong>: The receiver module continuously listens for data packets. When a packet with a matching address is received, it is checked for errors and then the payload is extracted and processed.</li>
</ol>
<p>By understanding these principles, you can effectively use the nRF24L01 modules for reliable and efficient wireless communication in your Arduino projects.</p>
<hr />
<h2 id="nrf24l01-module-tutorial-for-arduino-nano-sending-a-simple-text-message">nRF24L01 Module Tutorial for Arduino Nano: Sending a Simple Text Message<a class="headerlink" href="#nrf24l01-module-tutorial-for-arduino-nano-sending-a-simple-text-message" title="Permanent link">&para;</a></h2>
<p>This tutorial will guide you through setting up two Arduino Nanos to communicate using the nRF24L01 wireless communication module. We'll transmit a simple "Hello, World!" message from one Arduino (the sender) to another Arduino (the receiver).</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<ul>
<li>2 x nRF24L01 Modules</li>
<li>2 x Arduino Nano</li>
<li>Breadboards and jumper wires</li>
<li>Arduino IDE installed on your computer</li>
<li>Necessary library: <code>RF24</code></li>
</ul>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<h3 id="wiring-the-nrf24l01-module-to-arduino-nano">Wiring the nRF24L01 Module to Arduino Nano<a class="headerlink" href="#wiring-the-nrf24l01-module-to-arduino-nano" title="Permanent link">&para;</a></h3>
<h4 id="nrf24l01-module">nRF24L01 Module<a class="headerlink" href="#nrf24l01-module" title="Permanent link">&para;</a></h4>
<p><img alt="nRF24L01" src="../../99_Resources/images/nRF24L01-Pinout.png" /></p>
<ol>
<li><strong>VCC</strong> (Power) -&gt; Connect to Arduino Nano 3.3V (Note: Do not connect to 5V as it might damage the module)</li>
<li><strong>GND</strong> (Ground) -&gt; Connect to Arduino Nano GND</li>
<li><strong>CE</strong> (Chip Enable) -&gt; Connect to Arduino Nano D9</li>
<li><strong>CSN</strong> (Chip Select Not) -&gt; Connect to Arduino Nano D10</li>
<li><strong>SCK</strong> (Clock) -&gt; Connect to Arduino Nano D13</li>
<li><strong>MOSI</strong> (Master Out Slave In) -&gt; Connect to Arduino Nano D11</li>
<li><strong>MISO</strong> (Master In Slave Out) -&gt; Connect to Arduino Nano D12</li>
<li><strong>IRQ</strong> (Interrupt, optional) -&gt; Leave unconnected or connect to an Arduino digital pin if needed</li>
</ol>
<h3 id="installing-required-libraries">Installing Required Libraries<a class="headerlink" href="#installing-required-libraries" title="Permanent link">&para;</a></h3>
<ol>
<li>Open the Arduino IDE.</li>
<li>Go to <strong>Sketch</strong> &gt; <strong>Include Library</strong> &gt; <strong>Manage Libraries</strong>.</li>
<li>Install the <code>RF24</code> library.</li>
</ol>
<h2 id="basic-code-example">Basic Code Example<a class="headerlink" href="#basic-code-example" title="Permanent link">&para;</a></h2>
<h3 id="transmitter-code">Transmitter Code<a class="headerlink" href="#transmitter-code" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SPI.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;nRF24L01.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;RF24.h&gt;</span>

<span class="n">RF24</span><span class="w"> </span><span class="nf">radio</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// CE, CSN</span>

<span class="k">const</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">address</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;00001&quot;</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Initialize the nRF24L01 module</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">setPALevel</span><span class="p">(</span><span class="n">RF24_PA_MIN</span><span class="p">);</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>

<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Transmitter Ready&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">text</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, World!&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Send data</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">text</span><span class="p">));</span>

<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Sent: Hello, World!&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="receiver-code">Receiver Code<a class="headerlink" href="#receiver-code" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SPI.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;nRF24L01.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;RF24.h&gt;</span>

<span class="n">RF24</span><span class="w"> </span><span class="nf">radio</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// CE, CSN</span>

<span class="k">const</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">address</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;00001&quot;</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Initialize the nRF24L01 module</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">);</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">setPALevel</span><span class="p">(</span><span class="n">RF24_PA_MIN</span><span class="p">);</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>

<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Receiver Ready&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">text</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">text</span><span class="p">));</span>

<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Received: &quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="code-explanation">Code Explanation<a class="headerlink" href="#code-explanation" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Libraries</strong>: Includes the necessary library for the nRF24L01 module.</li>
<li><strong>Initialization</strong>: Initializes the nRF24L01 module in the <code>setup</code> function.</li>
<li><strong>Data Transmission</strong>: The transmitter sends a simple "Hello, World!" message via the nRF24L01 module.</li>
<li><strong>Data Reception</strong>: The receiver reads the incoming data and prints it to the Serial Monitor.</li>
</ul>
<h2 id="running-the-code">Running the Code<a class="headerlink" href="#running-the-code" title="Permanent link">&para;</a></h2>
<ol>
<li>Connect your first Arduino Nano (Device 1) to your computer via USB.</li>
<li>Open the Arduino IDE and paste the transmitter code.</li>
<li>Select the correct board (Arduino Nano) and port under <strong>Tools</strong>.</li>
<li>Upload the code to your Arduino Nano.</li>
<li>Open the Serial Monitor for Device 1 to observe the transmitted message.</li>
<li>Connect your second Arduino Nano (Device 2) to your computer via USB.</li>
<li>Open the Arduino IDE and paste the receiver code.</li>
<li>Select the correct board (Arduino Nano) and port under <strong>Tools</strong>.</li>
<li>Upload the code to your Arduino Nano.</li>
<li>Open the Serial Monitor for Device 2 to observe the received message.</li>
</ol>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>No Communication</strong>: Check the wiring, ensure the correct power supply is used, and verify the CE and CSN pins are correctly connected.</li>
<li><strong>Incorrect Readings</strong>: Ensure the Serial Monitor settings (baud rate) and ensure the correct COM port is selected.</li>
</ul>
<h2 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.sparkfun.com/datasheets/Components/SMD/nRF24L01P_Product_Specification_1_0.pdf">nRF24L01+ Datasheet</a></li>
<li><a href="https://tmrh20.github.io/RF24/">RF24 Library Documentation</a></li>
</ul>
<p>This simple tutorial should help you get started with basic communication using the nRF24L01 modules. Experiment with different messages and setups to fully explore the capabilities of your project. Happy experimenting!</p>
<hr />
<h1 id="nrf24l01-separate-mpu6050-and-vl53l0x-data-transmission">nRF24L01 Separate MPU6050 and VL53L0X Data Transmission<a class="headerlink" href="#nrf24l01-separate-mpu6050-and-vl53l0x-data-transmission" title="Permanent link">&para;</a></h1>
<p>In this tutorial, we'll set up two Arduino Nanos to communicate using the nRF24L01 module. One Arduino will transmit data from an MPU6050 sensor, while the other will transmit data from a VL53L0X sensor. We'll also implement a method to choose whether the device is currently a sender or receiver and enable two-way communication.</p>
<h2 id="requirements_1">Requirements<a class="headerlink" href="#requirements_1" title="Permanent link">&para;</a></h2>
<ul>
<li>2 x nRF24L01 Modules</li>
<li>2 x Arduino Nano</li>
<li>MPU6050 Sensor</li>
<li>VL53L0X ToF Sensor</li>
<li>Breadboards and jumper wires</li>
<li>Arduino IDE installed on your computer</li>
<li>Necessary libraries: <code>RF24</code>, <code>Wire</code>, <code>Adafruit_VL53L0X</code>, <code>MPU6050</code></li>
</ul>
<h2 id="setup_1">Setup<a class="headerlink" href="#setup_1" title="Permanent link">&para;</a></h2>
<h3 id="wiring-the-nrf24l01-module-to-arduino-nano_1">Wiring the nRF24L01 Module to Arduino Nano<a class="headerlink" href="#wiring-the-nrf24l01-module-to-arduino-nano_1" title="Permanent link">&para;</a></h3>
<h4 id="nrf24l01-module_1">nRF24L01 Module<a class="headerlink" href="#nrf24l01-module_1" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>VCC</strong> (Power) -&gt; Connect to Arduino Nano 3.3V (Note: Do not connect to 5V as it might damage the module)</li>
<li><strong>GND</strong> (Ground) -&gt; Connect to Arduino Nano GND</li>
<li><strong>CE</strong> (Chip Enable) -&gt; Connect to Arduino Nano D9</li>
<li><strong>CSN</strong> (Chip Select Not) -&gt; Connect to Arduino Nano D10</li>
<li><strong>SCK</strong> (Clock) -&gt; Connect to Arduino Nano D13</li>
<li><strong>MOSI</strong> (Master Out Slave In) -&gt; Connect to Arduino Nano D11</li>
<li><strong>MISO</strong> (Master In Slave Out) -&gt; Connect to Arduino Nano D12</li>
<li><strong>IRQ</strong> (Interrupt, optional) -&gt; Leave unconnected or connect to an Arduino digital pin if needed</li>
</ol>
<h3 id="installing-required-libraries_1">Installing Required Libraries<a class="headerlink" href="#installing-required-libraries_1" title="Permanent link">&para;</a></h3>
<ol>
<li>Open the Arduino IDE.</li>
<li>Go to <strong>Sketch</strong> &gt; <strong>Include Library</strong> &gt; <strong>Manage Libraries</strong>.</li>
<li>Install the <code>RF24</code>, <code>Adafruit_VL53L0X</code>, and <code>MPU6050</code> libraries.</li>
</ol>
<h2 id="basic-code-example_1">Basic Code Example<a class="headerlink" href="#basic-code-example_1" title="Permanent link">&para;</a></h2>
<h3 id="common-code-for-both-devices">Common Code for Both Devices<a class="headerlink" href="#common-code-for-both-devices" title="Permanent link">&para;</a></h3>
<p>First, write the common setup and loop code to determine whether the device is a sender or receiver.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SPI.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;nRF24L01.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;RF24.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Adafruit_VL53L0X.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;MPU6050.h&gt;</span>

<span class="n">RF24</span><span class="w"> </span><span class="nf">radio</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// CE, CSN</span>

<span class="k">const</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">addresses</span><span class="p">[][</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;00001&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;00002&quot;</span><span class="p">};</span>

<span class="c1">// Create MPU6050 object</span>
<span class="n">MPU6050</span><span class="w"> </span><span class="n">mpu</span><span class="p">;</span>

<span class="c1">// Create VL53L0X object</span>
<span class="n">Adafruit_VL53L0X</span><span class="w"> </span><span class="n">tof</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Adafruit_VL53L0X</span><span class="p">();</span>

<span class="k">enum</span><span class="w"> </span><span class="nc">Mode</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">SENDER</span><span class="p">,</span><span class="w"> </span><span class="n">RECEIVER</span><span class="w"> </span><span class="p">};</span>
<span class="n">Mode</span><span class="w"> </span><span class="n">currentMode</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Initialize the nRF24L01 module</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">setPALevel</span><span class="p">(</span><span class="n">RF24_PA_MIN</span><span class="p">);</span>

<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Enter &#39;S&#39; for Sender or &#39;R&#39; for Receiver:&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">());</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;S&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;s&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">currentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SENDER</span><span class="p">;</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Mode: Sender&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;R&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;r&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">currentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RECEIVER</span><span class="p">;</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Mode: Receiver&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Initialize MPU6050 if sender</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SENDER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="w">    </span><span class="n">mpu</span><span class="p">.</span><span class="n">initialize</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">mpu</span><span class="p">.</span><span class="n">testConnection</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Could not find a valid MPU6050 sensor, check wiring!&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Initialize VL53L0X if receiver</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RECEIVER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tof</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Failed to boot VL53L0X&quot;</span><span class="p">);</span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SENDER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sendIMUData</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">receiveAndSendToFData</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">IMUData</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">ax</span><span class="p">;</span>
<span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">ay</span><span class="p">;</span>
<span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">az</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">ToFData</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">distance</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">sendIMUData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">IMUData</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">mpu</span><span class="p">.</span><span class="n">getAcceleration</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">ax</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">ay</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">az</span><span class="p">);</span>

<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>

<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Sent IMU Data - ax: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">ax</span><span class="p">);</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, ay: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">ay</span><span class="p">);</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, az: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">az</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">receiveAndSendToFData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">IMUData</span><span class="w"> </span><span class="n">imuData</span><span class="p">;</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">imuData</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">imuData</span><span class="p">));</span>

<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Received IMU Data - ax: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">imuData</span><span class="p">.</span><span class="n">ax</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, ay: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">imuData</span><span class="p">.</span><span class="n">ay</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, az: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">imuData</span><span class="p">.</span><span class="n">az</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Read ToF data</span>
<span class="w">    </span><span class="n">ToFData</span><span class="w"> </span><span class="n">tofData</span><span class="p">;</span>
<span class="w">    </span><span class="n">tof</span><span class="p">.</span><span class="n">rangingTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tofData</span><span class="p">.</span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Send ToF data back</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tofData</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">tofData</span><span class="p">));</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>

<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Sent ToF Data - distance: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">tofData</span><span class="p">.</span><span class="n">distance</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="code-explanation_1">Code Explanation<a class="headerlink" href="#code-explanation_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Mode Selection</strong>: The setup prompts the user to select whether the device is a sender or receiver.</li>
<li><strong>Sensor Initialization</strong>: Initializes the MPU6050 sensor if the device is a sender, and initializes the VL53L0X sensor if the device is a receiver.</li>
<li><strong>Data Transmission</strong>: </li>
<li>The sender reads data from the MPU6050 sensor and transmits it.</li>
<li>The receiver reads the incoming MPU6050 data, reads the ToF data from the VL53L0X sensor, and sends the ToF data back to the sender.</li>
</ul>
<h2 id="running-the-code_1">Running the Code<a class="headerlink" href="#running-the-code_1" title="Permanent link">&para;</a></h2>
<ol>
<li>Connect your first Arduino Nano (Device 1) to your computer via USB.</li>
<li>Open the Arduino IDE and upload the common code.</li>
<li>Open the Serial Monitor and enter 'S' to set Device 1 as the sender.</li>
<li>Connect your second Arduino Nano (Device 2) to your computer via USB.</li>
<li>Open the Arduino IDE and upload the common code.</li>
<li>Open the Serial Monitor and enter 'R' to set Device 2 as the receiver.</li>
<li>Observe the transmitted and received data on the Serial Monitors of both devices.</li>
</ol>
<h2 id="advanced-task-two-way-communication">Advanced Task: Two-Way Communication<a class="headerlink" href="#advanced-task-two-way-communication" title="Permanent link">&para;</a></h2>
<h3 id="objective">Objective<a class="headerlink" href="#objective" title="Permanent link">&para;</a></h3>
<p>Implement two-way communication where both Arduinos can send and receive data.</p>
<h3 id="instructions">Instructions<a class="headerlink" href="#instructions" title="Permanent link">&para;</a></h3>
<ol>
<li>Modify the <code>receiveAndSendToFData</code> function to handle the reception of ToF data at the sender.</li>
<li>Update the <code>sendIMUData</code> function to handle the reception of IMU data at the receiver.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SENDER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sendIMUData</span><span class="p">();</span>
<span class="w">    </span><span class="n">receiveToFData</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">receiveIMUDataAndSendToFData</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">sendIMUData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">IMUData</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">mpu</span><span class="p">.</span><span class="n">getAcceleration</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">ax</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">ay</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">az</span><span class="p">);</span>

<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
<span class="w">  </span><span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>

<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Sent IMU Data - ax: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">ax</span><span class="p">);</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, ay: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">ay</span><span class="p">);</span>
<span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, az: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">az</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">receiveIMUDataAndSendToFData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">IMUData</span><span class="w"> </span><span class="n">imuData</span><span class="p">;</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">imuData</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">imuData</span><span class="p">));</span>

<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Received IMU Data - ax: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">imuData</span><span class="p">.</span><span class="n">ax</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, ay: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">imuData</span><span class="p">.</span><span class="n">ay</span><span class="p">);</span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, az: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">imuData</span><span class="p">.</span><span class="n">az</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Read ToF data</span>
<span class="w">    </span><span class="n">ToFData</span><span class="w"> </span><span class="n">tofData</span><span class="p">;</span>
<span class="w">    </span><span class="n">tof</span><span class="p">.</span><span class="n">rangingTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tofData</span><span class="p">.</span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Send ToF data back</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tofData</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">tofData</span><span class="p">));</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>

<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Sent ToF Data - distance: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">tofData</span><span class="p">.</span><span class="n">distance</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">receiveToFData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ToFData</span><span class="w"> </span><span class="n">tofData</span><span class="p">;</span>
<span class="w">    </span><span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tofData</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">tofData</span><span class="p">));</span>

<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Received ToF Data - distance: &quot;</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">tofData</span><span class="p">.</span><span class="n">distance</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="explanation">Explanation<a class="headerlink" href="#explanation" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Two-Way Communication</strong>: </li>
<li>The sender now also receives ToF data after sending IMU data.</li>
<li>The receiver receives IMU data, reads ToF data, and sends it back to the sender.</li>
</ul>
<h2 id="tips">Tips<a class="headerlink" href="#tips" title="Permanent link">&para;</a></h2>
<ul>
<li>Ensure your wiring is secure to avoid intermittent connections.</li>
<li>Use a stable power supply to avoid fluctuations in sensor readings.</li>
<li>Calibrate the sensors if you notice significant drift in the readings.</li>
</ul>
<h2 id="troubleshooting_1">Troubleshooting<a class="headerlink" href="#troubleshooting_1" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>No Communication</strong>: Check the wiring, ensure the correct power supply is used, and verify the CE and CSN pins are correctly connected.</li>
<li><strong>Incorrect Readings</strong>: Ensure the</li>
</ul>
<p>sensors are correctly connected and not causing noise in the readings.
- <strong>No Output</strong>: Verify the Serial Monitor settings (baud rate) and ensure the correct COM port is selected.</p>
<p>This tutorial and the tasks provided should help you integrate and use the nRF24L01 module with your Arduino Nano to send and receive sensor data from both MPU6050 and VL53L0X sensors. Experiment with different setups and configurations to fully explore the capabilities of your project. Happy experimenting!</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../I2C/" class="btn btn-neutral float-left" title="I2C"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../remote/" class="btn btn-neutral float-right" title="Remote">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../I2C/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../remote/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
